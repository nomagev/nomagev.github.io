<!DOCTYPE html>
<html>
<head>
    <link href="https://fonts.googleapis.com/css?family=Press+Start+2P" rel="stylesheet">
    <link href="https://unpkg.com/nes.css/css/nes.min.css" rel="stylesheet">
    <style>
        #boot-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            color: #209cee;
            font-family: monospace;
            padding: 40px;
            z-index: 9999;
            font-size: 14px;
            line-height: 1.5;
        }

        #boot-text {
            white-space: pre-wrap;
        }

        /* Cursor blink effect */
        #boot-text::after {
            content: "_";
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* 1. Your existing base styles */
        body { background-color: #212529; color: white; font-family: 'Press Start 2P', cursive; padding: 20px; }
        .container { max-width: 900px; margin: auto; }
        .repo-card { margin-bottom: 20px; background-color: #fff; color: #212529; }

        /* 2. Updated .ascii-art class (merged) */
        .ascii-art { 
            font-family: monospace; 
            white-space: pre; 
            font-size: 10px; 
            line-height: 1.2; 
            text-align: center; 
            color: #209cee; 
            position: relative;
            display: block; /* Changed from inline-block to center better */
            margin: 0 auto;
            text-shadow: 0.05em 0 0 rgba(255, 0, 0, 0.75),
                        -0.025em -0.05em 0 rgba(0, 255, 0, 0.75),
                        0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
        }

        /* 3. Scanline effect class */
        .scanline {
            width: 100%;
            height: 10px; /* Thinner for a more subtle look */
            z-index: 10;
            background: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(255, 255, 255, 0.1) 50%, rgba(0, 0, 0, 0) 100%);
            opacity: 0.1;
            position: absolute;
            bottom: 100%;
            animation: scanline 3s linear infinite;
        }

        /* 4. The Animation "Math" (Keyframes) */
        @keyframes glitch {
            0%, 14%, 49%, 99% {
                text-shadow: 0.05em 0 0 rgba(255, 0, 0, 0.75),
                            -0.05em -0.025em 0 rgba(0, 255, 0, 0.75),
                            -0.025em 0.05em 0 rgba(0, 0, 255, 0.75);
            }
            15% {
                text-shadow: -0.05em -0.025em 0 rgba(255, 0, 0, 0.75),
                             0.025em 0.025em 0 rgba(0, 255, 0, 0.75),
                            -0.05em -0.05em 0 rgba(0, 0, 255, 0.75);
                transform: translate(-2px, 1px);
            }
            50% {
                text-shadow: 0.025em 0.05em 0 rgba(255, 0, 0, 0.75),
                             0.05em 0 0 rgba(0, 255, 0, 0.75),
                             0 -0.05em 0 rgba(0, 0, 255, 0.75);
                transform: translate(2px, -1px);
            }
            100% {
                text-shadow: -0.025em 0 0 rgba(255, 0, 0, 0.75),
                             -0.025em -0.025em 0 rgba(0, 255, 0, 0.75),
                             -0.025em -0.05em 0 rgba(0, 0, 255, 0.75);
            }
        }

        @keyframes scanline {
            0% { bottom: 100%; }
            100% { bottom: -100%; }
        }
        /* Container that looks like a CRT monitor */
        .terminal-screen {
            position: relative;
            background: #000;
            overflow: hidden; /* Keeps the scanline inside the box */
            padding: 20px;
            border: 2px solid #333;
        }

        /* The actual moving bar */
        .scanline {
            width: 100%;
            height: 100px; /* Tall gradient for a soft "glow" look */
            z-index: 10;
            background: linear-gradient(
                0deg,
                rgba(0, 0, 0, 0) 0%,
                rgba(32, 156, 238, 0.1) 50%, /* Matches your #209cee color */
                rgba(0, 0, 0, 0) 100%
            );
            position: absolute;
            bottom: 100%;
            animation: scanline 4s linear infinite;
            pointer-events: none; /* Allows you to click things "through" the line */
        }

        @keyframes scanline {
            0% { bottom: 100%; }
            100% { bottom: -100%; }
        }
        
        footer .nes-container {
            padding: 1.5rem;
            border-image-repeat: stretch; /* Fixes some NES.css border artifacts */
        }

        footer .nes-icon {
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div id="boot-screen">
        <div id="boot-text"></div>
    </div>

    <div id="main-content" style="display: none;">
        <div class="container">
    <div class="container">
        <section class="nes-container with-title is-dark">
            <p class="title">NOMAGEV.SYS</p>
            <div class="terminal-screen">
                <div class="scanline"></div>
                <pre id="ascii-header" class="ascii-art">Loading system art...</pre>
            </div>
        </section>

        <section class="nes-container is-rounded is-dark" style="margin-top: 20px;">
            <p>Current Quest: Code Refactoring</p>
            <progress class="nes-progress is-primary" value="40" max="100"></progress>
        </section>

        <h2 style="margin-top: 30px;"> <i class="nes-icon trophy is-medium"></i> LEVEL SELECT </h2>
        <div id="repo-list" class="nes-container is-with-title">
            <p class="title">Projects</p>
            <div class="nes-container is-rounded repo-card">
              <p><strong>Loading Repositories...</strong></p>
            </div>
        </div>
        
        <footer style="margin-top: 50px;">
            <section class="nes-container is-dark">
                <div style="display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center;">
            
                    <div style="margin: 10px;">
                        <p class="nes-text is-warning" style="font-size: 12px; margin-bottom: 5px;">LICENSE</p>
                        <p style="font-size: 10px;">
                            <i class="nes-icon shield is-small"></i> 
                            GPL v2.0 - OPEN SOURCE
                        </p>
                    </div>

                    <div style="margin: 10px;">
                        <p class="nes-text is-primary" style="font-size: 12px; margin-bottom: 5px;">SYSTEM OWNER</p>
                        <p style="font-size: 10px;">@NOMAGEV</p>
                    </div>

                    <div style="margin: 10px;">
                        <p class="nes-text is-error" style="font-size: 12px; margin-bottom: 5px;">POWERED BY</p>
                        <div style="display: flex; gap: 10px;">
                            <i class="nes-logo"></i>
                            <span style="font-size: 10px;">NES.css & BLIM.PY</span>
                        </div>
                    </div>

                </div>

                <hr class="nes-hr">
        
                <div style="text-align: center; font-size: 8px; color: #666;">
                    <p>BUILD VERSION 2026.02.09 // ALL RIGHTS RESERVED TO THE COMMONS</p>
             </div>
            </section>
        </footer>

    </div>
    <script>
        async function getRepos() {
            try {
                const response = await fetch('https://api.github.com/users/nomagev/repos?sort=pushed');
                const repos = await response.json();
                const container = document.getElementById('repo-list');
                container.innerHTML = ''; 

                // Define your high-priority levels
                const priorityRepos = ['Blim.py', 'Markdown_Project']; 

                repos.forEach(repo => {
                    // Don't list the website repo itself
                    if(repo.name.toLowerCase() === 'nomagev.github.io') return;

                    const isPriority = priorityRepos.includes(repo.name);
                    const starIcon = isPriority ? '<i class="nes-icon star is-small"></i>' : '';

                    container.innerHTML += `
                        <div class="nes-container is-rounded is-dark" style="margin-bottom: 25px;">
                            <p class="title" style="background-color: #212529;">
                                ${starIcon} LEVEL: ${repo.name.toUpperCase()}
                            </p>
                            <p style="font-size: 12px; color: #209cee; margin-bottom: 15px;">
                                ${repo.description || 'MISSION: DATA RECOVERY IN PROGRESS...'}
                            </p>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span class="nes-text is-disabled" style="font-size: 10px;">
                                    LAST UPDATED: ${new Date(repo.pushed_at).toLocaleDateString()}
                                </span>
                                <a href="${repo.html_url}" target="_blank" class="nes-btn is-success">START</a>
                            </div>
                        </div>`;
                });
            } catch (e) {
                console.error("Failed to fetch levels", e);
            }
        }
        const bootLines = [
            "NOMAGEV(TM) BIOS v2.0.26",
            "Copyright (C) 2026 Nomagev Corporation",
            "",
            "CPU: ARMv8 Processor rev 4 (v8l) @ 1.5GHz",
            "MEMORY TEST: 640K OK",
            "",
            "CHECKING BACKLOG...",
            " - Markdown Support: PENDING",
            " - Blim.py ASCII Art: LOADED",
            " - Local Recovery: SECURED",
            "",
            "INITIALIZING SYSTEM HUB...",
            "MOUNTING GITHUB REPOSITORIES...",
            "READY."
        ];

        async function runBootSequence() {
            const bootContainer = document.getElementById('boot-text');
            const bootScreen = document.getElementById('boot-screen');
            const mainContent = document.getElementById('main-content');

            for (let line of bootLines) {
                // Create a new line element
                const div = document.createElement('div');
                bootContainer.appendChild(div);
                
                // "Type" the line
                div.textContent = "> " + line;
                
                // Wait a random short time for "processing" feel
                await new Promise(resolve => setTimeout(resolve, Math.random() * 200 + 100));
            }

            // Short pause at "READY."
            await new Promise(resolve => setTimeout(resolve, 800));

            // Fade out and show main content
            bootScreen.style.transition = "opacity 0.5s";
            bootScreen.style.opacity = "0";
            
            setTimeout(() => {
                bootScreen.style.display = "none";
                mainContent.style.display = "block";
                
                // Start your existing functions
                getRepos();
                loadAsciiArt();
            }, 500);
        }

        // Start everything
        runBootSequence();

        async function loadAsciiArt() {
            try {
                const response = await fetch('blim_art.txt');
                const artContainer = document.getElementById('ascii-header');
                if (!response.ok) {
                    artContainer.textContent = 'NOMAGEV';
                } else {
                    const art = await response.text();
                    artContainer.textContent = art;
                }
                // Trigger the first glitch loop
                randomGlitch(); 
            } catch (error) {
                document.getElementById('ascii-header').textContent = 'NOMAGEV';
            }
        }

        function randomGlitch() {
            const el = document.getElementById('ascii-header');
            if (!el) return;

            // 1. Remove animation
            el.style.animation = 'none';
            
            // 2. FORCE REFLOW (The "Magic" Line)
            // This makes the browser forget the animation was ever there
            void el.offsetWidth; 

            // 3. Re-apply animation
            el.style.animation = "glitch 200ms linear";

            // 4. Schedule next glitch
            const nextGlitchTime = Math.random() * 3000 + 1000;
            setTimeout(randomGlitch, nextGlitchTime);
        }

        // Initialize
        getRepos();
        loadAsciiArt();
    </script>
</body>
</html>